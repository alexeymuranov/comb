-# Locals:
-#   params_key_from_hash_key # this is a lambda or a hash
-#   available_formats
-#   current_format
-#   action_url (optional)
-#   hidden_parameters (optional)

-# Initialize local variables with nil if they do not exist.
- action_url = action_url
- hidden_parameters = hidden_parameters

%form#presentation_choice_form{ :action => "#{ action_url }#presentation_choice_form" }
  - if hidden_parameters
    = hidden_fields_from_nested_hash hidden_parameters

  %nav.presentation_choice
    .actions
      %label
        = t 'formats.attribute_name:', :attribute => t('labels.show_as')

      - available_formats.each do |format|
        - title = t(format, :scope => 'show_as')
        - if format == current_format
          %span.pressed_button.present.format.active<>
            = title
        - else
          %button._get_.present.format{ :type  => :submit,
                                        :name  => params_key_from_hash_key[:show_as],
                                        :value => format }<>
            = title
